import{b as m,j as e}from"./index-B8-9oSLq.js";import{u as N,c as d}from"./useGetClassName-Bjf0te0P.js";import{d as b}from"./index-DAy2jz70.js";function j(i){console.log(i);async function o(a){const t=await fetch(i.props.kcContext.properties.USER_ATTRIBUTE_ENDPOINT,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}});let n={};try{t.ok&&(n=await t.json())}catch(p){console.log(p)}return n}const{token:c}=m.useContext(b.AuthContext),[u,f]=m.useState([]),[l,s]=m.useState([]);return m.useEffect(()=>{(async()=>{try{const t=await o(c),n=t.userProfileMetadata;n&&n.attributes&&f(n.attributes),t&&t.attributes&&s(t.attributes)}catch(t){console.error("Error fetching user info:",t)}})()},[c]),e.jsx(e.Fragment,{children:u.map((a,t)=>a.name=="username"||a.name=="firstName"||a.name=="lastName"||a.name=="email"?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"active control-label",htmlFor:a.name,children:[a.name,a.required&&e.jsx("span",{className:"required",children:" *"})]}),e.jsx("input",{type:"text",className:"form-control",id:a.name,name:a.name,required:a.required,disabled:a.readOnly,defaultValue:l[a.name]??""})]},t))})}function v(i){const[o,c]=m.useState({}),[u,f]=m.useState(!1);if(m.useEffect(()=>{(async()=>{const s=await fetch(i.props.kcContext.properties.WELL_KNOWN_API);if(s.ok){let a=await s.json();c(a),f(!0)}})()},[]),u){const l={clientId:"account-console",authorizationEndpoint:o.authorization_endpoint,tokenEndpoint:o.token_endpoint,redirectUri:o.issuer+"/account",scope:"openid",onRefreshTokenExpire:s=>window.confirm("Session expired. Refresh page to continue using the site?")&&s.login()};return e.jsx(e.Fragment,{children:e.jsx(b.AuthProvider,{authConfig:l,children:e.jsx(j,{props:i.props})})})}return e.jsx(e.Fragment,{})}function y(i){const{kcContext:o,i18n:c,doUseDefaultCss:u,Template:f,classes:l}=i,{getClassName:s}=N({doUseDefaultCss:u,classes:{...l,kcBodyClass:d(l==null?void 0:l.kcBodyClass,"user")}}),{url:a,realm:t,messagesPerField:n,stateChecker:p,account:h,referrer:x}=o,{msg:r}=c;return e.jsxs(f,{kcContext:o,i18n:c,doUseDefaultCss:u,classes:l,active:"account",children:[e.jsxs("div",{className:"row d-flex align-items-center",children:[e.jsx("div",{className:"col-md-8",children:e.jsx("h2",{children:r("editAccountHtmlTitle")})}),e.jsx("div",{className:"col-md-4 subtitle",children:e.jsxs("span",{className:"subtitle",children:[e.jsx("span",{className:"required",children:"*"})," ",r("requiredFields")]})})]}),e.jsxs("form",{action:a.accountUrl,className:"form-horizontal mt-3",method:"post",children:[e.jsx("nav",{children:e.jsxs("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[e.jsx("a",{className:"nav-item nav-link active",id:"nav-tab1-tab","data-bs-toggle":"tab",href:"#nav-tab1",role:"tab","aria-controls":"nav-tab1","aria-selected":"true",children:r("personalInfoHtmlTitle")}),e.jsx("a",{className:"nav-item nav-link",id:"nav-tab2-tab","data-bs-toggle":"tab",href:"#nav-tab2",role:"tab","aria-controls":"nav-tab2","aria-selected":"false",children:r("profileScopeConsentText")})]})}),e.jsxs("div",{className:"tab-content pt-5",id:"nav-tabContent",children:[e.jsxs("div",{className:"tab-pane p-0 fade show active",id:"nav-tab1",role:"tabpanel","aria-labelledby":"nav-tab1-tab",children:[e.jsx("input",{type:"hidden",id:"stateChecker",name:"stateChecker",value:p}),!t.registrationEmailAsUsername&&e.jsx("div",{className:d("form-group",n.printIfExists("username","has-error")),children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"active control-label",htmlFor:"username",children:r("username")}),t.editUsernameAllowed&&e.jsx("span",{className:"required",children:"*"}),e.jsx("input",{type:"text",className:"form-control",id:"username",name:"username",disabled:!t.editUsernameAllowed,defaultValue:h.username??""})]})}),e.jsxs("div",{className:d("form-group",n.printIfExists("email","has-error")),children:[e.jsx("label",{className:"active control-label",htmlFor:"email",children:r("email")}),e.jsx("input",{type:"text",className:"form-control",id:"email",name:"email",defaultValue:h.email??""})]}),e.jsxs("div",{className:d("form-group",n.printIfExists("lastName","has-error")),children:[e.jsx("label",{className:"active control-label",htmlFor:"firstName",children:r("firstName")}),e.jsx("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",defaultValue:h.firstName??""})]}),e.jsxs("div",{className:d("form-group",n.printIfExists("lastName","has-error")),children:[e.jsx("label",{className:"active control-label",htmlFor:"lastName",children:r("lastName")}),e.jsx("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",defaultValue:h.lastName??""})]})]}),e.jsx("div",{className:"tab-pane p-0 fade",id:"nav-tab2",role:"tabpanel","aria-labelledby":"nav-tab2-tab",children:e.jsx(v,{props:i})})]}),e.jsx("div",{className:"form-group d-flex justify-content-end",children:e.jsx("div",{id:"kc-form-buttons",className:"col-md-offset-2 col-md-10 submit",children:e.jsxs("div",{className:"d-flex justify-content-end align-items-center",children:[x!==void 0&&e.jsx("a",{className:"m-3",href:x==null?void 0:x.url,children:r("backToApplication")}),e.jsx("button",{type:"submit",className:d(s("kcButtonClass"),s("kcButtonDefaultClass"),s("kcButtonLargeClass"),"m-3"),name:"submitAction",value:"Cancel",children:r("doCancel")}),e.jsx("button",{type:"submit",className:d(s("kcButtonClass"),s("kcButtonPrimaryClass"),s("kcButtonLargeClass"),"m-3"),name:"submitAction",value:"Save",children:r("doSave")})]})})})]})]})}export{y as default};
//# sourceMappingURL=Account-Bys_thBf.js.map
