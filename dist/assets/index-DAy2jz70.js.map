{"version":3,"file":"index-DAy2jz70.js","sources":["../../node_modules/react-oauth2-code-pkce/dist/Hooks.js","../../node_modules/react-oauth2-code-pkce/dist/authConfig.js","../../node_modules/react-oauth2-code-pkce/dist/errors.js","../../node_modules/react-oauth2-code-pkce/dist/httpUtils.js","../../node_modules/react-oauth2-code-pkce/dist/pkceUtils.js","../../node_modules/react-oauth2-code-pkce/dist/authentication.js","../../node_modules/react-oauth2-code-pkce/dist/decodeJWT.js","../../node_modules/react-oauth2-code-pkce/dist/timeUtils.js","../../node_modules/react-oauth2-code-pkce/dist/AuthContext.js","../../node_modules/react-oauth2-code-pkce/dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = require(\"react\");\nfunction useBrowserStorage(key, initialValue, type) {\n    const storage = type === 'session' ? sessionStorage : localStorage;\n    const [storedValue, setStoredValue] = (0, react_1.useState)(() => {\n        const item = storage.getItem(key);\n        try {\n            return item ? JSON.parse(item) : initialValue;\n        }\n        catch (error) {\n            console.warn(`Failed to parse stored value for '${key}'.\\nContinuing with default value.`);\n            return initialValue;\n        }\n    });\n    const setValue = (value) => {\n        if (value === undefined) {\n            // Delete item if set to undefined. This avoids warning on loading invalid json\n            setStoredValue(value);\n            storage.removeItem(key);\n            return;\n        }\n        try {\n            const valueToStore = value instanceof Function ? value(storedValue) : value;\n            setStoredValue(valueToStore);\n            storage.setItem(key, JSON.stringify(valueToStore));\n        }\n        catch (error) {\n            console.error(`Failed to store value '${value}' for key '${key}'`);\n        }\n    };\n    (0, react_1.useEffect)(() => {\n        const storageEventHandler = (event) => {\n            var _a;\n            if (event.storageArea === storage && event.key === key) {\n                if (event.newValue === null) {\n                    setStoredValue(undefined);\n                }\n                else {\n                    try {\n                        setStoredValue(JSON.parse((_a = event.newValue) !== null && _a !== void 0 ? _a : ''));\n                    }\n                    catch (error) {\n                        console.warn(`Failed to handle storageEvent's newValue='${event.newValue}' for key '${key}'`);\n                    }\n                }\n            }\n        };\n        window.addEventListener('storage', storageEventHandler, false);\n        return () => window.removeEventListener('storage', storageEventHandler, false);\n    });\n    return [storedValue, setValue];\n}\nexports.default = useBrowserStorage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateConfig = exports.createInternalConfig = void 0;\nfunction stringIsUnset(value) {\n    const unset = ['', undefined, null];\n    return unset.includes(value);\n}\nfunction createInternalConfig(passedConfig) {\n    // Set default values for internal config object\n    const { autoLogin = true, clearURL = true, decodeToken = true, scope = undefined, preLogin = () => null, postLogin = () => null, onRefreshTokenExpire = undefined, storage = 'local', storageKeyPrefix = 'ROCP_', refreshWithScope = true, } = passedConfig;\n    const config = Object.assign(Object.assign({}, passedConfig), { autoLogin: autoLogin, clearURL: clearURL, decodeToken: decodeToken, scope: scope, preLogin: preLogin, postLogin: postLogin, onRefreshTokenExpire: onRefreshTokenExpire, storage: storage, storageKeyPrefix: storageKeyPrefix, refreshWithScope: refreshWithScope });\n    validateConfig(config);\n    return config;\n}\nexports.createInternalConfig = createInternalConfig;\nfunction validateConfig(config) {\n    if (stringIsUnset(config === null || config === void 0 ? void 0 : config.clientId))\n        throw Error(\"'clientId' must be set in the 'AuthConfig' object passed to 'react-oauth2-code-pkce' AuthProvider\");\n    if (stringIsUnset(config === null || config === void 0 ? void 0 : config.authorizationEndpoint))\n        throw Error(\"'authorizationEndpoint' must be set in the 'AuthConfig' object passed to 'react-oauth2-code-pkce' AuthProvider\");\n    if (stringIsUnset(config === null || config === void 0 ? void 0 : config.tokenEndpoint))\n        throw Error(\"'tokenEndpoint' must be set in the 'AuthConfig' object passed to 'react-oauth2-code-pkce' AuthProvider\");\n    if (stringIsUnset(config === null || config === void 0 ? void 0 : config.redirectUri))\n        throw Error(\"'redirectUri' must be set in the 'AuthConfig' object passed to 'react-oauth2-code-pkce' AuthProvider\");\n    if (!['session', 'local'].includes(config.storage))\n        throw Error(\"'storage' must be one of ('session', 'local')\");\n    if (config === null || config === void 0 ? void 0 : config.extraAuthParams)\n        console.warn(\"The 'extraAuthParams' configuration parameter will be deprecated. You should use \" +\n            \"'extraTokenParameters' instead.\");\n    if ((config === null || config === void 0 ? void 0 : config.extraAuthParams) && (config === null || config === void 0 ? void 0 : config.extraTokenParameters))\n        console.warn(\"Using both 'extraAuthParams' and 'extraTokenParameters' is not recommended. \" +\n            \"They do the same thing, and you should only use 'extraTokenParameters'\");\n}\nexports.validateConfig = validateConfig;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchError = void 0;\nclass FetchError extends Error {\n    constructor(status, statusText, message) {\n        super(message);\n        this.name = 'FetchError';\n        this.status = status;\n        this.statusText = statusText;\n    }\n}\nexports.FetchError = FetchError;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.postWithXForm = void 0;\nconst errors_1 = require(\"./errors\");\nfunction buildUrlEncodedRequest(request) {\n    let queryString = '';\n    for (const [key, value] of Object.entries(request)) {\n        queryString += `${queryString ? '&' : ''}${key}=${encodeURIComponent(value)}`;\n    }\n    return queryString;\n}\nfunction postWithXForm(url, request) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return fetch(url, {\n            method: 'POST',\n            body: buildUrlEncodedRequest(request),\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n        }).then((response) => __awaiter(this, void 0, void 0, function* () {\n            if (!response.ok) {\n                const responseBody = yield response.text();\n                throw new errors_1.FetchError(response.status, response.statusText, responseBody);\n            }\n            return response;\n        }));\n    });\n}\nexports.postWithXForm = postWithXForm;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateCodeChallenge = exports.generateRandomString = exports.getRandomInteger = void 0;\nfunction getRandomInteger(range) {\n    const max_range = 256; // Highest possible number in Uint8\n    // Create byte array and fill with 1 random number\n    const byteArray = new Uint8Array(1);\n    window.crypto.getRandomValues(byteArray); // This is the new, and safer API than Math.Random()\n    // If the generated number is out of range, try again\n    if (byteArray[0] >= Math.floor(max_range / range) * range)\n        return getRandomInteger(range);\n    return byteArray[0] % range;\n}\nexports.getRandomInteger = getRandomInteger;\nfunction generateRandomString(length) {\n    let text = '';\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < length; i++) {\n        text += possible.charAt(getRandomInteger(possible.length - 1));\n    }\n    return text;\n}\nexports.generateRandomString = generateRandomString;\n/**\n *  PKCE Code Challenge = base64url(hash(codeVerifier))\n */\nfunction generateCodeChallenge(codeVerifier) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!((_a = window.crypto.subtle) === null || _a === void 0 ? void 0 : _a.digest)) {\n            throw new Error(\"The context/environment is not secure, and does not support the 'crypto.subtle' module. See: https://developer.mozilla.org/en-US/docs/Web/API/Crypto/subtle for details\");\n        }\n        const encoder = new TextEncoder();\n        const bytes = encoder.encode(codeVerifier); // Encode the verifier to a byteArray\n        const hash = yield window.crypto.subtle.digest('SHA-256', bytes); // sha256 hash it\n        const hashString = String.fromCharCode(...new Uint8Array(hash));\n        const base64 = btoa(hashString); // Base64 encode the verifier hash\n        return base64 // Base64Url encode the base64 encoded string, making it safe as a query param\n            .replace(/=/g, '')\n            .replace(/\\+/g, '-')\n            .replace(/\\//g, '_');\n    });\n}\nexports.generateCodeChallenge = generateCodeChallenge;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateState = exports.redirectToLogout = exports.fetchWithRefreshToken = exports.fetchTokens = exports.redirectToLogin = void 0;\nconst httpUtils_1 = require(\"./httpUtils\");\nconst pkceUtils_1 = require(\"./pkceUtils\");\nconst codeVerifierStorageKey = 'PKCE_code_verifier';\nconst stateStorageKey = 'ROCP_auth_state';\nfunction redirectToLogin(config, customState) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const storage = config.storage === 'session' ? sessionStorage : localStorage;\n        // Create and store a random string in storage, used as the 'code_verifier'\n        const codeVerifier = (0, pkceUtils_1.generateRandomString)(96);\n        storage.setItem(codeVerifierStorageKey, codeVerifier);\n        // Hash and Base64URL encode the code_verifier, used as the 'code_challenge'\n        return (0, pkceUtils_1.generateCodeChallenge)(codeVerifier).then((codeChallenge) => {\n            // Set query parameters and redirect user to OAuth2 authentication endpoint\n            const params = new URLSearchParams(Object.assign({ response_type: 'code', client_id: config.clientId, redirect_uri: config.redirectUri, code_challenge: codeChallenge, code_challenge_method: 'S256' }, config.extraAuthParameters));\n            if (config.scope !== undefined) {\n                params.append('scope', config.scope);\n            }\n            storage.removeItem(stateStorageKey);\n            const state = customState !== null && customState !== void 0 ? customState : config.state;\n            if (state) {\n                storage.setItem(stateStorageKey, state);\n                params.append('state', state);\n            }\n            // Call any preLogin function in authConfig\n            if (config === null || config === void 0 ? void 0 : config.preLogin)\n                config.preLogin();\n            window.location.assign(`${config.authorizationEndpoint}?${params.toString()}`);\n        });\n    });\n}\nexports.redirectToLogin = redirectToLogin;\n// This is called a \"type predicate\". Which allow us to know which kind of response we got, in a type safe way.\nfunction isTokenResponse(body) {\n    return body.access_token !== undefined;\n}\nfunction postTokenRequest(tokenEndpoint, tokenRequest) {\n    return (0, httpUtils_1.postWithXForm)(tokenEndpoint, tokenRequest).then((response) => {\n        return response.json().then((body) => {\n            if (isTokenResponse(body)) {\n                return body;\n            }\n            throw Error(JSON.stringify(body));\n        });\n    });\n}\nconst fetchTokens = (config) => {\n    const storage = config.storage === 'session' ? sessionStorage : localStorage;\n    /*\n      The browser has been redirected from the authentication endpoint with\n      a 'code' url parameter.\n      This code will now be exchanged for Access- and Refresh Tokens.\n    */\n    const urlParams = new URLSearchParams(window.location.search);\n    const authCode = urlParams.get('code');\n    const codeVerifier = storage.getItem(codeVerifierStorageKey);\n    if (!authCode) {\n        throw Error(\"Parameter 'code' not found in URL. \\nHas authentication taken place?\");\n    }\n    if (!codeVerifier) {\n        throw Error(\"Can't get tokens without the CodeVerifier. \\nHas authentication taken place?\");\n    }\n    const tokenRequest = Object.assign(Object.assign({ grant_type: 'authorization_code', code: authCode, client_id: config.clientId, redirect_uri: config.redirectUri, code_verifier: codeVerifier }, config.extraTokenParameters), config.extraAuthParams);\n    return postTokenRequest(config.tokenEndpoint, tokenRequest);\n};\nexports.fetchTokens = fetchTokens;\nconst fetchWithRefreshToken = (props) => {\n    const { config, refreshToken } = props;\n    const refreshRequest = Object.assign({ grant_type: 'refresh_token', refresh_token: refreshToken, client_id: config.clientId, redirect_uri: config.redirectUri }, config.extraTokenParameters);\n    if (config.refreshWithScope)\n        refreshRequest.scope = config.scope;\n    return postTokenRequest(config.tokenEndpoint, refreshRequest);\n};\nexports.fetchWithRefreshToken = fetchWithRefreshToken;\nfunction redirectToLogout(config, token, refresh_token, idToken, state, logoutHint) {\n    var _a;\n    const params = new URLSearchParams(Object.assign({ token: refresh_token || token, token_type_hint: refresh_token ? 'refresh_token' : 'access_token', client_id: config.clientId, post_logout_redirect_uri: (_a = config.logoutRedirect) !== null && _a !== void 0 ? _a : config.redirectUri, ui_locales: window.navigator.languages.join(' ') }, config.extraLogoutParameters));\n    if (idToken)\n        params.append('id_token_hint', idToken);\n    if (state)\n        params.append('state', state);\n    if (logoutHint)\n        params.append('logout_hint', logoutHint);\n    window.location.assign(`${config.logoutEndpoint}?${params.toString()}`);\n}\nexports.redirectToLogout = redirectToLogout;\nfunction validateState(urlParams, storageType) {\n    const storage = storageType === 'session' ? sessionStorage : localStorage;\n    const receivedState = urlParams.get('state');\n    const loadedState = storage.getItem(stateStorageKey);\n    if (receivedState !== loadedState) {\n        throw new Error('\"state\" value received from authentication server does no match client request. Possible cross-site request forgery');\n    }\n}\nexports.validateState = validateState;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeJWT = void 0;\n/**\n * Decodes the base64 encoded JWT. Returns a TToken.\n */\nconst decodeJWT = (token) => {\n    try {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonPayload = decodeURIComponent(atob(base64)\n            .split('')\n            .map((c) => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)\n            .join(''));\n        return JSON.parse(jsonPayload);\n    }\n    catch (e) {\n        console.error(e);\n        throw Error('Failed to decode the access token.\\n\\tIs it a proper JSON Web Token?\\n\\t' +\n            \"You can disable JWT decoding by setting the 'decodeToken' value to 'false' the configuration.\");\n    }\n};\nexports.decodeJWT = decodeJWT;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRefreshExpiresIn = exports.epochTimeIsPast = exports.epochAtSecondsFromNow = exports.FALLBACK_EXPIRE_TIME = void 0;\nexports.FALLBACK_EXPIRE_TIME = 600; // 10minutes\n// Returns epoch time (in seconds) for when the token will expire\n// 'secondsFromNow' should always be an integer, but some auth providers has decided that whole numbers should be strings...\nconst epochAtSecondsFromNow = (secondsFromNow) => Math.round(Date.now() / 1000 + Number(secondsFromNow));\nexports.epochAtSecondsFromNow = epochAtSecondsFromNow;\n/**\n * Check if the Access Token has expired.\n * Will return True if the token has expired, OR there is less than 30 seconds until it expires.\n */\nfunction epochTimeIsPast(timestamp) {\n    const now = Math.round(Date.now()) / 1000;\n    const nowWithBuffer = now + 30;\n    return nowWithBuffer >= timestamp;\n}\nexports.epochTimeIsPast = epochTimeIsPast;\nconst refreshExpireKeys = [\n    'refresh_expires_in', // KeyCloak\n    'refresh_token_expires_in', // Azure AD\n];\nfunction getRefreshExpiresIn(tokenExpiresIn, response) {\n    for (const key of refreshExpireKeys) {\n        if (key in response)\n            return response[key];\n    }\n    // If the response has a refresh_token, but no expire_time. Assume it's at least 10m longer than access_token's expire\n    if (response.refresh_token)\n        return tokenExpiresIn + exports.FALLBACK_EXPIRE_TIME;\n    // The token response had no refresh_token. Set refresh_expire equals to access_token expire\n    return tokenExpiresIn;\n}\nexports.getRefreshExpiresIn = getRefreshExpiresIn;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthProvider = exports.AuthContext = void 0;\nconst react_1 = __importStar(require(\"react\"));\nconst Hooks_1 = __importDefault(require(\"./Hooks\"));\nconst authConfig_1 = require(\"./authConfig\");\nconst authentication_1 = require(\"./authentication\");\nconst decodeJWT_1 = require(\"./decodeJWT\");\nconst errors_1 = require(\"./errors\");\nconst timeUtils_1 = require(\"./timeUtils\");\nexports.AuthContext = (0, react_1.createContext)({\n    token: '',\n    login: () => null,\n    logOut: () => null,\n    error: null,\n    loginInProgress: false,\n});\nconst AuthProvider = ({ authConfig, children }) => {\n    const config = (0, react_1.useMemo)(() => (0, authConfig_1.createInternalConfig)(authConfig), [authConfig]);\n    const [refreshToken, setRefreshToken] = (0, Hooks_1.default)(`${config.storageKeyPrefix}refreshToken`, undefined, config.storage);\n    const [refreshTokenExpire, setRefreshTokenExpire] = (0, Hooks_1.default)(`${config.storageKeyPrefix}refreshTokenExpire`, (0, timeUtils_1.epochAtSecondsFromNow)(2 * timeUtils_1.FALLBACK_EXPIRE_TIME), config.storage);\n    const [token, setToken] = (0, Hooks_1.default)(`${config.storageKeyPrefix}token`, '', config.storage);\n    const [tokenExpire, setTokenExpire] = (0, Hooks_1.default)(`${config.storageKeyPrefix}tokenExpire`, (0, timeUtils_1.epochAtSecondsFromNow)(timeUtils_1.FALLBACK_EXPIRE_TIME), config.storage);\n    const [idToken, setIdToken] = (0, Hooks_1.default)(`${config.storageKeyPrefix}idToken`, undefined, config.storage);\n    const [loginInProgress, setLoginInProgress] = (0, Hooks_1.default)(`${config.storageKeyPrefix}loginInProgress`, false, config.storage);\n    const [refreshInProgress, setRefreshInProgress] = (0, Hooks_1.default)(`${config.storageKeyPrefix}refreshInProgress`, false, config.storage);\n    const [tokenData, setTokenData] = (0, react_1.useState)();\n    const [idTokenData, setIdTokenData] = (0, react_1.useState)();\n    const [error, setError] = (0, react_1.useState)(null);\n    function clearStorage() {\n        setRefreshToken(undefined);\n        setToken('');\n        setTokenExpire((0, timeUtils_1.epochAtSecondsFromNow)(timeUtils_1.FALLBACK_EXPIRE_TIME));\n        setRefreshTokenExpire((0, timeUtils_1.epochAtSecondsFromNow)(timeUtils_1.FALLBACK_EXPIRE_TIME));\n        setIdToken(undefined);\n        setTokenData(undefined);\n        setIdTokenData(undefined);\n        setLoginInProgress(false);\n    }\n    function logOut(state, logoutHint) {\n        clearStorage();\n        setError(null);\n        if ((config === null || config === void 0 ? void 0 : config.logoutEndpoint) && token)\n            (0, authentication_1.redirectToLogout)(config, token, refreshToken, idToken, state, logoutHint);\n    }\n    function login(state) {\n        clearStorage();\n        setLoginInProgress(true);\n        // TODO: Raise error on wrong state type in v2\n        let typeSafePassedState = state;\n        if (state && typeof state !== 'string') {\n            console.warn(`Passed login state must be of type 'string'. Received '${state}'. Ignoring value...`);\n            typeSafePassedState = undefined;\n        }\n        (0, authentication_1.redirectToLogin)(config, typeSafePassedState).catch((error) => {\n            console.error(error);\n            setError(error.message);\n            setLoginInProgress(false);\n        });\n    }\n    function handleTokenResponse(response) {\n        var _a, _b, _c;\n        setToken(response.access_token);\n        let tokenExp = timeUtils_1.FALLBACK_EXPIRE_TIME;\n        // Decode IdToken, so we can use \"exp\" from that as fallback if expire not returned in the response\n        try {\n            if (response.id_token) {\n                const decodedToken = (0, decodeJWT_1.decodeJWT)(response.id_token);\n                setIdTokenData(decodedToken);\n                tokenExp = Math.round(Number(decodedToken.exp) - Date.now() / 1000); // number of seconds from now\n            }\n        }\n        catch (e) {\n            console.warn(`Failed to decode idToken: ${e.message}`);\n        }\n        const tokenExpiresIn = (_b = (_a = config.tokenExpiresIn) !== null && _a !== void 0 ? _a : response.expires_in) !== null && _b !== void 0 ? _b : tokenExp;\n        setTokenExpire((0, timeUtils_1.epochAtSecondsFromNow)(tokenExpiresIn));\n        const refreshTokenExpiresIn = (_c = config.refreshTokenExpiresIn) !== null && _c !== void 0 ? _c : (0, timeUtils_1.getRefreshExpiresIn)(tokenExpiresIn, response);\n        if (response.refresh_token) {\n            setRefreshToken(response.refresh_token);\n            setRefreshTokenExpire((0, timeUtils_1.epochAtSecondsFromNow)(refreshTokenExpiresIn));\n        }\n        setIdToken(response.id_token);\n        try {\n            if (config.decodeToken)\n                setTokenData((0, decodeJWT_1.decodeJWT)(response.access_token));\n        }\n        catch (e) {\n            console.warn(`Failed to decode access token: ${e.message}`);\n        }\n    }\n    function handleExpiredRefreshToken(initial = false) {\n        // If it's the first page load, OR there is no sessionExpire callback, we trigger a new login\n        if (initial) {\n            login();\n            return;\n        }\n        // TODO: Breaking change - remove automatic login during ongoing session\n        if (!config.onRefreshTokenExpire) {\n            login();\n            return;\n        }\n        config.onRefreshTokenExpire({\n            login,\n        });\n    }\n    function refreshAccessToken(initial = false) {\n        if (!token)\n            return;\n        // The token has not expired. Do nothing\n        if (!(0, timeUtils_1.epochTimeIsPast)(tokenExpire))\n            return;\n        // Other instance (tab) is currently refreshing. This instance skip the refresh if not initial\n        if (refreshInProgress && !initial)\n            return;\n        // The refreshToken has expired\n        if ((0, timeUtils_1.epochTimeIsPast)(refreshTokenExpire)) {\n            handleExpiredRefreshToken(initial);\n            return;\n        }\n        // The access_token has expired, and we have a non-expired refresh_token. Use it to refresh access_token.\n        if (refreshToken) {\n            setRefreshInProgress(true);\n            (0, authentication_1.fetchWithRefreshToken)({ config, refreshToken })\n                .then((result) => handleTokenResponse(result))\n                .catch((error) => {\n                if (error instanceof errors_1.FetchError) {\n                    // If the fetch failed with status 400, assume expired refresh token\n                    if (error.status === 400) {\n                        handleExpiredRefreshToken(initial);\n                        return;\n                    }\n                    // Unknown error. Set error, and login if first page load\n                    console.error(error);\n                    setError(error.message);\n                    if (initial)\n                        login();\n                }\n                // Unknown error. Set error, and login if first page load\n                else if (error instanceof Error) {\n                    console.error(error);\n                    setError(error.message);\n                    if (initial)\n                        login();\n                }\n            })\n                .finally(() => {\n                setRefreshInProgress(false);\n            });\n            return;\n        }\n        console.warn('Failed to refresh access_token. Most likely there is no refresh_token, or the authentication server did not reply with an explicit expire time, and the default expire times are longer than the actual tokens expire time');\n    }\n    // Register the 'check for soon expiring access token' interval (every ~10 seconds).\n    (0, react_1.useEffect)(() => {\n        // The randomStagger is used to avoid multiple tabs logging in at the exact same time.\n        const randomStagger = 10000 * Math.random();\n        const interval = setInterval(() => refreshAccessToken(), 5000 + randomStagger);\n        return () => clearInterval(interval);\n    }, [token, refreshToken, refreshTokenExpire, tokenExpire]); // Replace the interval with a new when values used inside refreshAccessToken changes\n    // This ref is used to make sure the 'fetchTokens' call is only made once.\n    // Multiple calls with the same code will, and should, return an error from the API\n    // See: https://beta.reactjs.org/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development\n    const didFetchTokens = (0, react_1.useRef)(false);\n    // Runs once on page load\n    (0, react_1.useEffect)(() => {\n        // The client has been redirected back from the auth endpoint with an auth code\n        if (loginInProgress) {\n            const urlParams = new URLSearchParams(window.location.search);\n            if (!urlParams.get('code')) {\n                // This should not happen. There should be a 'code' parameter in the url by now...\n                const error_description = urlParams.get('error_description') ||\n                    'Bad authorization state. Refreshing the page and log in again might solve the issue.';\n                console.error(`${error_description}\\nExpected  to find a '?code=' parameter in the URL by now. Did the authentication get aborted or interrupted?`);\n                setError(error_description);\n                clearStorage();\n                return;\n            }\n            // Make sure we only try to use the auth code once\n            if (!didFetchTokens.current) {\n                didFetchTokens.current = true;\n                try {\n                    (0, authentication_1.validateState)(urlParams, config.storage);\n                }\n                catch (e) {\n                    console.error(e);\n                    setError(e.message);\n                }\n                // Request tokens from auth server with the auth code\n                (0, authentication_1.fetchTokens)(config)\n                    .then((tokens) => {\n                    handleTokenResponse(tokens);\n                    // Call any postLogin function in authConfig\n                    if (config === null || config === void 0 ? void 0 : config.postLogin)\n                        config.postLogin();\n                })\n                    .catch((error) => {\n                    console.error(error);\n                    setError(error.message);\n                })\n                    .finally(() => {\n                    if (config.clearURL) {\n                        // Clear ugly url params\n                        window.history.replaceState(null, '', window.location.pathname);\n                    }\n                    setLoginInProgress(false);\n                });\n            }\n            return;\n        }\n        // First page visit\n        if (!token && config.autoLogin)\n            return login();\n        // Page refresh after login has succeeded\n        try {\n            if (idToken)\n                setIdTokenData((0, decodeJWT_1.decodeJWT)(idToken));\n        }\n        catch (e) {\n            console.warn(`Failed to decode idToken: ${e.message}`);\n        }\n        try {\n            if (token && config.decodeToken)\n                setTokenData((0, decodeJWT_1.decodeJWT)(token));\n        }\n        catch (e) {\n            console.warn(`Failed to decode access token: ${e.message}`);\n        }\n        refreshAccessToken(true); // Check if token should be updated\n    }, []);\n    return (react_1.default.createElement(exports.AuthContext.Provider, { value: {\n            token,\n            tokenData,\n            idToken,\n            idTokenData,\n            login,\n            logOut,\n            error,\n            loginInProgress,\n        } }, children));\n};\nexports.AuthProvider = AuthProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthContext = exports.AuthProvider = void 0;\nvar AuthContext_1 = require(\"./AuthContext\");\nObject.defineProperty(exports, \"AuthProvider\", { enumerable: true, get: function () { return AuthContext_1.AuthProvider; } });\nObject.defineProperty(exports, \"AuthContext\", { enumerable: true, get: function () { return AuthContext_1.AuthContext; } });\n"],"names":["Hooks","react_1","require$$0","useBrowserStorage","key","initialValue","type","storage","storedValue","setStoredValue","item","setValue","value","valueToStore","storageEventHandler","event","_a","authConfig","stringIsUnset","createInternalConfig","passedConfig","autoLogin","clearURL","decodeToken","scope","preLogin","postLogin","onRefreshTokenExpire","storageKeyPrefix","refreshWithScope","config","validateConfig","errors","FetchError","status","statusText","message","__awaiter","this","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","e","rejected","result","httpUtils","errors_1","buildUrlEncodedRequest","request","queryString","postWithXForm","url","response","responseBody","pkceUtils","getRandomInteger","range","byteArray","generateRandomString","length","text","possible","i","generateCodeChallenge","codeVerifier","bytes","hash","hashString","authentication","httpUtils_1","pkceUtils_1","require$$1","codeVerifierStorageKey","stateStorageKey","redirectToLogin","customState","codeChallenge","params","state","isTokenResponse","body","postTokenRequest","tokenEndpoint","tokenRequest","fetchTokens","authCode","fetchWithRefreshToken","props","refreshToken","refreshRequest","redirectToLogout","token","refresh_token","idToken","logoutHint","validateState","urlParams","storageType","receivedState","loadedState","decodeJWT_1","decodeJWT","base64","jsonPayload","c","exports","epochAtSecondsFromNow","secondsFromNow","epochTimeIsPast","timestamp","refreshExpireKeys","getRefreshExpiresIn","tokenExpiresIn","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","__importDefault","Hooks_1","authConfig_1","require$$2","authentication_1","require$$3","require$$4","require$$5","timeUtils_1","require$$6","AuthProvider","children","setRefreshToken","refreshTokenExpire","setRefreshTokenExpire","setToken","tokenExpire","setTokenExpire","setIdToken","loginInProgress","setLoginInProgress","refreshInProgress","setRefreshInProgress","tokenData","setTokenData","idTokenData","setIdTokenData","error","setError","clearStorage","logOut","login","typeSafePassedState","handleTokenResponse","_b","_c","tokenExp","decodedToken","refreshTokenExpiresIn","handleExpiredRefreshToken","initial","refreshAccessToken","randomStagger","interval","didFetchTokens","error_description","tokens","AuthContext_1"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}