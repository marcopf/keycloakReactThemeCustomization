import{j as a,r as h}from"./index-Bk5ipnyi.js";import{c as i}from"./useGetClassName-CNtCpfOf.js";import{u as N}from"./useGetClassName-CZjUJSiK.js";import{d as p}from"./index-C5IxwAqk.js";const j="account-console",v="http://localhost:8080/realms/master/protocol/openid-connect/auth",g="http://localhost:8080/realms/master/protocol/openid-connect/token",C="http://localhost:8080/realms/master/account/",k="openid",y="http://localhost:8080/realms/master/account/?userProfileMetadata=true",E={clientId:j,authorizationEndpoint:v,tokenEndpoint:g,redirectUri:C,scope:k,onRefreshTokenExpire:r=>window.confirm("Session expired. Refresh page to continue using the site?")&&r.login()};async function I(r){const n=await fetch(y,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});let l={};try{n.ok&&(l=await n.json())}catch(o){console.log(o)}return l}function A(){const{token:r}=h.useContext(p.AuthContext),[n,l]=h.useState([]),[o,f]=h.useState([]);return h.useEffect(()=>{(async()=>{try{const t=await I(r),c=t.userProfileMetadata;c&&c.attributes&&l(c.attributes),t&&t.attributes&&f(t.attributes)}catch(t){console.error("Error fetching user info:",t)}})()},[r]),a.jsx(a.Fragment,{children:n.map((e,t)=>e.name=="username"||e.name=="firstName"||e.name=="lastName"||e.name=="email"?a.jsx(a.Fragment,{}):a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"active control-label",htmlFor:e.name,children:[e.name,e.required&&a.jsx("span",{className:"required",children:" *"})]}),a.jsx("input",{type:"text",className:"form-control",id:e.name,name:e.name,required:e.required,disabled:e.readOnly,defaultValue:o[e.name]??""})]},t))})}function D(){return a.jsx(a.Fragment,{children:a.jsx(p.AuthProvider,{authConfig:E,children:a.jsx(A,{})})})}function P(r){const{kcContext:n,i18n:l,doUseDefaultCss:o,Template:f,classes:e}=r,{getClassName:t}=N({doUseDefaultCss:o,classes:{...e,kcBodyClass:i(e==null?void 0:e.kcBodyClass,"user")}}),{url:c,realm:x,messagesPerField:m,stateChecker:b,account:d,referrer:u}=n,{msg:s}=l;return a.jsxs(f,{kcContext:n,i18n:l,doUseDefaultCss:o,classes:e,active:"account",children:[a.jsxs("div",{className:"row d-flex align-items-center",children:[a.jsx("div",{className:"col-md-8",children:a.jsx("h2",{children:s("editAccountHtmlTitle")})}),a.jsx("div",{className:"col-md-4 subtitle",children:a.jsxs("span",{className:"subtitle",children:[a.jsx("span",{className:"required",children:"*"})," ",s("requiredFields")]})})]}),a.jsxs("form",{action:c.accountUrl,className:"form-horizontal mt-3",method:"post",children:[a.jsx("nav",{children:a.jsxs("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[a.jsx("a",{className:"nav-item nav-link active",id:"nav-tab1-tab","data-bs-toggle":"tab",href:"#nav-tab1",role:"tab","aria-controls":"nav-tab1","aria-selected":"true",children:s("defaultAttributes")}),a.jsx("a",{className:"nav-item nav-link",id:"nav-tab2-tab","data-bs-toggle":"tab",href:"#nav-tab2",role:"tab","aria-controls":"nav-tab2","aria-selected":"false",children:s("additionalAttributes")})]})}),a.jsxs("div",{className:"tab-content pt-5",id:"nav-tabContent",children:[a.jsxs("div",{className:"tab-pane p-0 fade show active",id:"nav-tab1",role:"tabpanel","aria-labelledby":"nav-tab1-tab",children:[a.jsx("input",{type:"hidden",id:"stateChecker",name:"stateChecker",value:b}),!x.registrationEmailAsUsername&&a.jsx("div",{className:i("form-group",m.printIfExists("username","has-error")),children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"active control-label",htmlFor:"username",children:s("username")}),x.editUsernameAllowed&&a.jsx("span",{className:"required",children:"*"}),a.jsx("input",{type:"text",className:"form-control",id:"username",name:"username",disabled:!x.editUsernameAllowed,defaultValue:d.username??""})]})}),a.jsxs("div",{className:i("form-group",m.printIfExists("email","has-error")),children:[a.jsx("label",{className:"active control-label",htmlFor:"email",children:s("email")}),a.jsx("input",{type:"text",className:"form-control",id:"email",name:"email",defaultValue:d.email??""})]}),a.jsxs("div",{className:i("form-group",m.printIfExists("lastName","has-error")),children:[a.jsx("label",{className:"active control-label",htmlFor:"firstName",children:s("firstName")}),a.jsx("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",defaultValue:d.firstName??""})]}),a.jsxs("div",{className:i("form-group",m.printIfExists("lastName","has-error")),children:[a.jsx("label",{className:"active control-label",htmlFor:"lastName",children:s("lastName")}),a.jsx("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",defaultValue:d.lastName??""})]})]}),a.jsx("div",{className:"tab-pane p-0 fade",id:"nav-tab2",role:"tabpanel","aria-labelledby":"nav-tab2-tab",children:a.jsx(D,{})})]}),a.jsx("div",{className:"form-group d-flex justify-content-end",children:a.jsx("div",{id:"kc-form-buttons",className:"col-md-offset-2 col-md-10 submit",children:a.jsxs("div",{className:"d-flex justify-content-end align-items-center",children:[u!==void 0&&a.jsx("a",{className:"m-3",href:u==null?void 0:u.url,children:s("backToApplication")}),a.jsx("button",{type:"submit",className:i(t("kcButtonClass"),t("kcButtonDefaultClass"),t("kcButtonLargeClass"),"m-3"),name:"submitAction",value:"Cancel",children:s("doCancel")}),a.jsx("button",{type:"submit",className:i(t("kcButtonClass"),t("kcButtonPrimaryClass"),t("kcButtonLargeClass"),"m-3"),name:"submitAction",value:"Save",children:s("doSave")})]})})})]})]})}export{P as default};
//# sourceMappingURL=Account-Cqdduwph.js.map
